{% for key, src in sources.items() %}
expression 'Source.{{ key }}' =
  kind: m
  expression: ```
    let
      Source = Snowflake.Databases("{{ src.server }}", [
{% if src.warehouse %}
        Warehouse = "{{ src.warehouse }}"{% if src.role or (src.options and src.options.queryTag) %},{% endif %}

{% endif -%}
{% if src.role %}
        Role = "{{ src.role }}"{% if src.options and src.options.queryTag %},{% endif %}

{% endif -%}
{% if src.options and src.options.queryTag %}
        QueryTag = "{{ src.options.queryTag }}"
{% endif %}
      ]),
      DB = if optionalDatabase <> null then
             Source{[Name = optionalDatabase, Kind = "Database"]}[Data]
           else
             Source
    in
      DB
  ```
  {% if not loop.last %}

{% endif %}
{% endfor %}